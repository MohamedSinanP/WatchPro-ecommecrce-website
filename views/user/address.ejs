<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Address Management</title>
    <link rel="icon" type="image/png" href="/css/User/images/icons/favicon.png" />
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/fonts/iconic/css/material-design-iconic-font.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/fonts/linearicons-v1.0.0/icon-font.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/animate/animate.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/css-hamburgers/hamburgers.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/animsition/css/animsition.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/select2/select2.min.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/slick/slick.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/MagnificPopup/magnific-popup.css">
    <link rel="stylesheet" type="text/css" href="/css/User/vendor/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" type="text/css" href="/css/User/css/util.css">
    <link rel="stylesheet" type="text/css" href="/css/User/css/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="/css/User/address.css"> 
    <link rel="stylesheet" href="/css/User/accountSidebar.css">
</head>

<body>

    <!-- header -->
    <%- include('../partials/user/header') %>

        <div class="user-account-container">
            <!-- Sidebar -->
            <aside class="sidebar-1">
                <nav>
                    <ul>
                        <li><a href="/user/profile">User Profile</a></li>
                        <li><a href="/user/address">Address</a></li>
                        <li><a href="/user/orders">Orders</a></li>
                        <li><a href="/user/wallet">Wallet</a></li>
                        <li><a href="logout.html">Logout</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Address Management Content -->
            <div class="content">
                <h1 class="m-b-5">Your Addresses</h1>
                <button class="m-b-5 btn" data-toggle="modal" data-target="#addAddressModal" >Add
                    Address</button>

                <div class="address-card-container"> <!-- Add this wrapper -->
                    <% addresses.forEach((address)=> { %>
                        <div class="address-card mb-3 p-3 border rounded">
                                <%= address.firstName %>
                                <%= address.lastName %>
                                <%= address.address %>
                                <%= address.phoneNumber %>
                                <%= address.city %>
                                <%= address.state %>
                                <%= address.pincode %>
                            <div class="actions">
                                <button class="btn btn-sm btn-secondary"
                                    onclick="editAddress('<%= address._id %>', '<%= address.firstName %>', '<%= address.lastName %>', '<%= address.address %>', '<%= address.phoneNumber %>', '<%= address.city %>', '<%= address.state %>', '<%= address.pincode %>')">Edit</button>
                                <button class="btn btn-sm btn-danger delete-address"
                                    data-id="<%= address._id %>">Delete</button>
                            </div>
                        </div>
                        <% }); %>
                </div>
            </div>

        </div>
        </div>




        <!-- Add Address Modal -->
        <div class="modal fade" id="addAddressModal" tabindex="-1" role="dialog" aria-labelledby="addAddressModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addAddressModalLabel">Add Address</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="addAddressForm">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" class="form-control" id="firstName">
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" class="form-control" id="lastName">
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <textarea class="form-control" id="address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="phoneNumber">Phone Number</label>
                                <input type="text" class="form-control" id="phoneNumber">
                            </div>
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" class="form-control" id="city">
                            </div>
                            <div class="form-group">
                                <label for="state">State</label>
                                <select class="form-control" id="state">
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="pincode">Pincode</label>
                                <input type="number" class="form-control" id="pincode">
                            </div>
                            <button type="submit" class="btn btn-primary">Add Address</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Address Modal -->
        <div class="modal fade" id="editAddressModal" tabindex="-1" role="dialog"
            aria-labelledby="editAddressModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editAddressModalLabel">Edit Address</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="editAddressForm">
                            <input type="hidden" id="editAddressId">
                            <div class="form-group">
                                <label for="editFirstName">First Name</label>
                                <input type="text" class="form-control" id="editFirstName">
                            </div>
                            <div class="form-group">
                                <label for="editLastName">Last Name</label>
                                <input type="text" class="form-control" id="editLastName">
                            </div>
                            <div class="form-group">
                                <label for="editAddress">Address</label>
                                <textarea class="form-control" id="editAddress"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="editPhoneNumber">Phone Number</label>
                                <input type="number" class="form-control" id="editPhoneNumber">
                            </div>
                            <div class="form-group">
                                <label for="editCity">City</label>
                                <input type="text" class="form-control" id="editCity">
                            </div>
                            <div class="form-group">
                                <label for="editState">State</label>
                                <select class="form-control" id="editState">
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editPincode">Pincode</label>
                                <input type="number" class="form-control" id="editPincode">
                            </div>
                            <button type="submit" class="btn btn-primary">Update Address</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="pagination-controls d-flex justify-content-center my-3">
            <% if (totalPages > 1) { %>
              <% if (currentPage > 1) { %>
                <button onclick="loadPage('<%= currentPage - 1 %>')" class="btn btn-primary mx-1 my-1">&laquo;</button>
              <% } %>
              <% for (let i = 1; i <= totalPages; i++) { %>
                <button onclick="loadPage('<%= i %>')" class="btn <%= i === currentPage ? 'btn-secondary' : 'btn-light' %> mx-1">
                  <%= i %>
                </button>
              <% } %>
              <% if (currentPage < totalPages) { %>
                <button onclick="loadPage('<%= currentPage + 1 %>')" class="btn btn-primary mx-1 my-1">&raquo;</button>
              <% } %>
            <% } %>
          </div>
        <!-- footer-->
        <%- include('../partials/user/footer') %>

        <script src="/css/User/vendor/jquery/jquery-3.2.1.min.js"></script>
        <script src="/css/User/vendor/animsition/js/animsition.min.js"></script>
        <script src="/css/User/vendor/bootstrap/js/popper.js"></script>
        <script src="/css/User/vendor/bootstrap/js/bootstrap.min.js"></script>
        <script src="/css/User/vendor/select2/select2.min.js"></script>
        <script src="/css/User/vendor/daterangepicker/moment.min.js"></script>
        <script src="/css/User/vendor/daterangepicker/daterangepicker.js"></script>
        <script src="/css/User/vendor/slick/slick.min.js"></script>
        <script src="/css/User/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
        <script src="/css/User/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
        <script src="/css/User/js/main.js"></script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="/js/user/address.js"></script>
        

</body>

</html>